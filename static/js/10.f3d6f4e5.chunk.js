(this["webpackJsonpwindmill-dashboard-react"]=this["webpackJsonpwindmill-dashboard-react"]||[]).push([[10],{221:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),s=a(34),c=a(36),r=a(13),i=a(37);t.default=function(){let[e,t]=Object(l.useState)({secretjs:null,address:null}),[a,u]=Object(l.useState)([]);async function o(e,t,l){let n=[...a];e.status=l,n[t]=e,u(n)}async function d(){const{secretjs:t,address:a}=e;let l=await t.query.compute.queryContract({contractAddress:"secret1j6ly79zfvh83g8te9utystt8hc6vm84u23gnmn",codeHash:"0d21c959e0f195e792e391b7b1729f6c6af70912ce76572faaa3db1f10412dfc",query:{sponsor_message_request_check:{start_page:0,page_size:200}}});u(l.vec)}Object(l.useEffect)(()=>{null!=e.secretjs&&null!=e.address||async function(){const{secretjs:e,address:a}=await Object(s.a)();t({secretjs:e,address:a})}(),null==e.secretjs&&null==e.address||d()},[e]);const[m,f]=Object(l.useState)(1),[E,b]=Object(l.useState)([]);return Object(l.useEffect)(()=>{b(a.slice(10*(m-1),10*m))},[m,a]),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("div",{className:"Panel mt-8"},n.a.createElement(r.TableContainer,{className:"mb-8"},n.a.createElement(r.Table,null,n.a.createElement(r.TableHeader,null,n.a.createElement("tr",null,n.a.createElement(r.TableCell,null,"Address"),n.a.createElement(r.TableCell,null,"Deque Store Index"),n.a.createElement(r.TableCell,null,"Index"),n.a.createElement(r.TableCell,null,"Title"),n.a.createElement(r.TableCell,null,"Message"),n.a.createElement(r.TableCell,null,"Status"),n.a.createElement(r.TableCell,null,"Actions"))),n.a.createElement(r.TableBody,null,E.map((e,t)=>n.a.createElement(r.TableRow,{key:t},n.a.createElement(r.TableCell,null,n.a.createElement("span",{className:"text-sm"}," ",e.addr)),n.a.createElement(r.TableCell,null,n.a.createElement("span",{className:"text-sm"}," ",e.deque_store_index)),n.a.createElement(r.TableCell,null,n.a.createElement("span",{className:"text-sm"}," ",e.index)),n.a.createElement(r.TableCell,null,n.a.createElement("div",{className:"flex items-center text-sm"},n.a.createElement("div",null,n.a.createElement("p",{className:"font-semibold"},e.title)))),n.a.createElement(r.TableCell,null,n.a.createElement("span",{className:"text-sm"}," ",e.message)),n.a.createElement(r.TableCell,null,e.status?"rejected"==e.status?n.a.createElement(r.Badge,{type:"danger"},e.status):n.a.createElement(r.Badge,{type:"success"},e.status):n.a.createElement(r.Badge,{type:"primary"},"pending")),n.a.createElement(r.TableCell,null,n.a.createElement("div",{className:"flex items-center space-x-4"},n.a.createElement(r.Button,{layout:"link",size:"icon","aria-label":"Edit",onClick:()=>{o(e,t,"accepted")}},n.a.createElement(i.HeartIcon,{className:"w-5 h-5","aria-hidden":"true"})),n.a.createElement(r.Button,{layout:"link",size:"icon","aria-label":"Delete",onClick:()=>{o(e,t,"rejected")}},n.a.createElement(i.TrashIcon,{className:"w-5 h-5","aria-hidden":"true"})))))))),n.a.createElement(r.TableFooter,null,n.a.createElement(r.Pagination,{totalResults:a?a.length:0,resultsPerPage:10,onChange:function(e){f(e)},label:"Table navigation"}))),n.a.createElement("div",{className:"flex justify-end pr-3"},n.a.createElement(r.Button,{onClick:()=>async function(){const{secretjs:t,address:l}=e;let n=[];for(let e=0;e<a.length;e++){let t=a[e];t.status&&("accepted"==t.status&&n.push({index:t.deque_store_index,is_accpeted:!0}),"rejected"==t.status&&n.push({index:t.deque_store_index,is_accpeted:!1}))}try{let e=await t.tx.compute.executeContract({sender:l,contractAddress:"secret1j6ly79zfvh83g8te9utystt8hc6vm84u23gnmn",codeHash:"0d21c959e0f195e792e391b7b1729f6c6af70912ce76572faaa3db1f10412dfc",msg:{review_sponsors:{decisions:n}},sentFunds:[]},{gasLimit:240297});e.jsonLog?Object(c.a)("success","Review submitted successfully!"," \n \n        Txhash: "+e.transactionHash):Object(c.a)("error","ERROR",e.rawLog)}catch(s){Object(c.a)("error","ERROR",s)}await d()}()},"Send txn")))))}},34:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var l=a(68),n=a(69);async function s(){const e=e=>new Promise(t=>setTimeout(t,e));for(;!window.keplr||!window.getEnigmaUtils||!window.getOfflineSignerOnlyAmino;)await e(50);await window.keplr.enable("pulsar-2");const t=window.keplr.getOfflineSignerOnlyAmino("pulsar-2"),[{address:a}]=await t.getAccounts();return{address:a,secretjs:await l.SecretNetworkClient.create({grpcWebUrl:"https://grpc.testnet.secretsaturn.net",chainId:"pulsar-2",wallet:t,walletAddress:a,encryptionUtils:window.keplr.getEnigmaUtils("pulsar-2")})}}n.config({path:"../../../.env"})},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var l=a(72),n=a.n(l),s=n.a.mixin({toast:!0,icon:"success",title:"General Title",position:"top-right",showConfirmButton:!1,timer:15e3,timerProgressBar:!0,showCloseButton:!0,didOpen:e=>{e.addEventListener("mouseenter",n.a.stopTimer),e.addEventListener("mouseleave",n.a.resumeTimer)}});async function c(e,t,a){s.fire({title:t,text:a,icon:e,color:"#ffffff",background:"#136762"})}}}]);
//# sourceMappingURL=10.f3d6f4e5.chunk.js.map